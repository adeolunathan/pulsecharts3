<!DOCTYPE html>
<html>
<head>
    <title>Test Robust Number Parser</title>
</head>
<body>
    <h1>Robust Number Parser Test</h1>
    <div id="results"></div>

    <script src="js/utils/RobustNumberParser.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const results = document.getElementById('results');
            
            // Test cases for the parser
            const testCases = [
                { input: '57,405', expected: 57405, description: 'Comma thousands separator' },
                { input: '1,234,567', expected: 1234567, description: 'Multiple comma separators' },
                { input: '57405', expected: 57405, description: 'Plain number' },
                { input: '$1,500', expected: 1500, description: 'Currency with comma' },
                { input: '(2,000)', expected: -2000, description: 'Parentheses negative with comma' },
                { input: '50%', expected: 0, description: 'Percentage (floored)' },
                { input: '', expected: 0, description: 'Empty string' },
                { input: null, expected: 0, description: 'Null value' },
                { input: 'abc', expected: 0, description: 'Non-numeric' }
            ];

            results.innerHTML = '<h2>Testing Robust Number Parser</h2>';
            
            let passed = 0;
            let total = testCases.length;

            testCases.forEach((testCase, index) => {
                const result = window.robustParseNumber(testCase.input);
                const success = result === testCase.expected;
                const statusIcon = success ? '✅' : '❌';
                
                results.innerHTML += `
                    <div style="margin: 10px 0; padding: 10px; border: 1px solid ${success ? 'green' : 'red'}; border-radius: 5px;">
                        <strong>Test ${index + 1}: ${statusIcon} ${testCase.description}</strong><br>
                        Input: ${JSON.stringify(testCase.input)} → Expected: ${testCase.expected}, Got: ${result}
                    </div>
                `;
                
                if (success) passed++;
            });

            results.innerHTML += `
                <div style="margin: 20px 0; padding: 15px; background: ${passed === total ? '#d4edda' : '#f8d7da'}; border-radius: 5px;">
                    <h3>Results: ${passed}/${total} tests passed (${Math.round(passed/total*100)}%)</h3>
                </div>
            `;
        });
    </script>
</body>
</html>