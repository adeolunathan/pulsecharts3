<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horizontal Menu Test</title>
    <link rel="stylesheet" href="css/pulse-analytics.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f8f9fa;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }
        .chart-placeholder {
            background: white;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            color: #6b7280;
            border: 2px dashed #e5e7eb;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ðŸ§ª Horizontal Menu System Test</h1>
            <p>Testing the new horizontal control menu layout</p>
        </div>

        <!-- Horizontal Chart Controls Menu -->
        <div class="horizontal-controls-menu">
            <div class="controls-menu-wrapper">
                <!-- Menu Sections (Left to Right) -->
                <div class="menu-section" data-section="data">
                    <button class="menu-trigger" data-target="data">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <line x1="9" y1="9" x2="15" y2="9"/>
                            <line x1="9" y1="13" x2="15" y2="13"/>
                            <line x1="9" y1="17" x2="15" y2="17"/>
                        </svg>
                        <span>Data</span>
                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6,9 12,15 18,9"/>
                        </svg>
                    </button>
                    <div class="menu-dropdown" id="data-dropdown">
                        <div id="data-controls" class="dropdown-content">
                            <div class="menu-control-section">
                                <div class="menu-section-header">
                                    <span class="section-icon">ðŸ“Š</span>
                                    <h4 class="section-title">Chart Type</h4>
                                    <span class="toggle-icon">â–¼</span>
                                </div>
                                <div class="menu-section-content">
                                    <div class="control-item">
                                        <label class="control-label">Chart Type</label>
                                        <select class="control-dropdown" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #d1d5db;">
                                            <option>Sankey Flow</option>
                                            <option>Bar Chart</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="menu-section" data-section="style">
                    <button class="menu-trigger" data-target="style">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
                        </svg>
                        <span>Style</span>
                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6,9 12,15 18,9"/>
                        </svg>
                    </button>
                    <div class="menu-dropdown" id="style-dropdown">
                        <div id="style-controls" class="dropdown-content">
                            <div class="menu-control-section">
                                <div class="menu-section-header">
                                    <span class="section-icon">ðŸŽ¨</span>
                                    <h4 class="section-title">Typography</h4>
                                    <span class="toggle-icon">â–¼</span>
                                </div>
                                <div class="menu-section-content">
                                    <div class="control-item">
                                        <label class="control-label">Font Size</label>
                                        <div class="slider-container">
                                            <input type="range" class="control-slider" min="10" max="24" value="14" style="flex: 1;">
                                            <span class="slider-value">14px</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="menu-section" data-section="colors">
                    <button class="menu-trigger" data-target="colors">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="13.5" cy="6.5" r=".5"/>
                            <circle cx="17.5" cy="10.5" r=".5"/>
                            <circle cx="8.5" cy="7.5" r=".5"/>
                            <circle cx="6.5" cy="12.5" r=".5"/>
                            <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/>
                        </svg>
                        <span>Colors</span>
                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6,9 12,15 18,9"/>
                        </svg>
                    </button>
                    <div class="menu-dropdown" id="colors-dropdown">
                        <div id="colors-controls" class="dropdown-content">
                            <div class="menu-control-section">
                                <div class="menu-section-header">
                                    <span class="section-icon">ðŸŽ¨</span>
                                    <h4 class="section-title">Color Palette</h4>
                                    <span class="toggle-icon">â–¼</span>
                                </div>
                                <div class="menu-section-content">
                                    <div class="color-item-modern">
                                        <input type="color" class="color-picker-square" value="#3b82f6" style="width: 24px; height: 24px; border: 2px solid rgba(226, 232, 240, 0.8); border-radius: 6px; cursor: pointer;">
                                        <div class="color-info-modern" style="flex: 1; margin-left: 16px;">
                                            <div class="color-label-modern">Primary Color</div>
                                            <div class="color-description-modern">Main chart color</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action buttons on the right -->
                <div class="menu-actions">
                    <button class="action-btn reset-btn" title="Reset all chart settings to default">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                            <path d="M21 3v5h-5"/>
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                            <path d="M8 16H3v5"/>
                        </svg>
                        <span>Reset</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Chart Area -->
        <div class="chart-placeholder">
            <h3>ðŸ“Š Chart Area</h3>
            <p>This area is now maximized for chart viewing!</p>
            <p><strong>Width:</strong> ~90% of screen (vs ~70% with sidebar)</p>
            <p><strong>Controls:</strong> Accessible via horizontal menu above</p>
        </div>
    </div>

    <script>
        // Initialize horizontal menu interactions
        function initializeTestMenu() {
            console.log('ðŸŽ›ï¸ Initializing test horizontal menu');
            
            const menuTriggers = document.querySelectorAll('.menu-trigger');
            const dropdowns = document.querySelectorAll('.menu-dropdown');
            
            menuTriggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const target = trigger.getAttribute('data-target');
                    const dropdown = document.getElementById(`${target}-dropdown`);
                    const section = trigger.closest('.menu-section');
                    
                    // Close all other dropdowns
                    dropdowns.forEach(dd => {
                        if (dd !== dropdown) {
                            dd.classList.remove('active');
                            const ddSection = dd.closest('.menu-section');
                            if (ddSection) ddSection.classList.remove('open');
                        }
                    });
                    
                    // Toggle current dropdown
                    const isOpen = dropdown.classList.contains('active');
                    if (isOpen) {
                        dropdown.classList.remove('active');
                        section.classList.remove('open');
                    } else {
                        dropdown.classList.add('active');
                        section.classList.add('open');
                    }
                    
                    console.log(`ðŸŽ›ï¸ Menu section ${target} ${isOpen ? 'closed' : 'opened'}`);
                });
            });
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                const isMenuClick = e.target.closest('.horizontal-controls-menu');
                if (!isMenuClick) {
                    dropdowns.forEach(dropdown => {
                        dropdown.classList.remove('active');
                        const section = dropdown.closest('.menu-section');
                        if (section) section.classList.remove('open');
                    });
                }
            });
            
            // Prevent dropdown close when clicking inside
            dropdowns.forEach(dropdown => {
                dropdown.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
            });
            
            console.log('âœ… Test horizontal menu initialized');
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeTestMenu);
    </script>
</body>
</html>